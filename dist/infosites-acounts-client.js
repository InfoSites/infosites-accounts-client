!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("jwt-decode")):"function"==typeof define&&define.amd?define(["jwt-decode"],t):e["infosites-accounts-client"]=t(e.jwtDecode)}(this,function(e){"use strict";return e="default"in e?e.default:e,function(t){var n=function(e,t,n){try{var o=document.createAttribute(t);o.nodeValue=n,e.setAttributeNode(o)}catch(e){}},o="iframe-infosites-accounts-"+t.appId,i=document.getElementById(o);i||(n(i=document.createElement("IFRAME"),"id",o),n(i,"frameBorder",0),n(i,"style","position: absolute; bottom: 0; right: 0; width: 0; height: 0;"),document.body.appendChild(i)),i.src=t.url+"/login/#/token?app="+t.appId+"&source="+window.location.href;var r={};return r.getToken=function(){return new Promise(function(e,t){var n=function n(o){var i=o.data.split("--");"token"===i[0]&&e(i[1]),"redirect"===i[0]&&t(i[1]),window.removeEventListener("message",n)};window.addEventListener("message",n),i.contentWindow.postMessage("token","*")})},r.decodeUser=function(t){var n=e(t);return{id:n.sub,email:n.email}},r.getUser=function(){return new Promise(function(e,t){r.getToken().then(function(t){e(r.decodeUser(t))},function(e){t(e)})})},r.logout=function(){return new Promise(function(e,t){var n=function t(n){e(),window.removeEventListener("message",t)};window.addEventListener("message",n),i.contentWindow.postMessage("logout","*")})},r}});
//# sourceMappingURL=infosites-acounts-client.js.map
